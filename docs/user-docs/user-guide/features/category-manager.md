# 分类管理指南

Ghost-Dir 提供了强大的分类管理功能，帮助您高效地组织和导航大量的模板。

- 适用版本: `>=1.0.0`
- 文档状态: `active`
- 最后更新: `2026-02-10`

## 核心模式

分类管理对话框采用**双模式**设计，以确保操作的精确性和数据安全性。

### 1. 浏览模式 (默认)

用于日常的添加、修改和删除操作。

*   **新建分类**：点击工具栏的“新建”按钮或在分类上右键选择“在此新建”。
*   **重命名**：选中单个分类后，点击“重命名”按钮、按 `F2` 键或通过右键菜单触发。
*   **批量删除**：勾选多个分类前的复选框，然后点击工具栏的“删除”按钮。
*   **右键快捷菜单**：右键点击分类可快速访问重命名、新建子分类和删除功能。

### 2. 排序模式

专门用于调整分类的显示顺序和层级结构。

*   **进入排序**：点击工具栏的“排序”按钮。此时界面会发生变化：
    *   分类前方会出现 `⠿` 拖拽手柄。
    *   复选框会被隐藏。
    *   编辑功能（新建/重命名/删除）会被禁用，以防止误操作。
*   **拖拽调整**：
    *   **排序**：点击并拖动分类到同级分类的其他位置。
    *   **变更层级**：将分类拖入另一个分类中，使其成为子分类。
*   **确认并保存**：点击“确认排序”按钮。系统将**自动保存**当前的结构与顺序。
*   **取消排序**：如果您对调整不满意，可以点击出现的“取消排序”按钮。系统将**放弃所有本次排序操作**并恢复之前的顺序。

## 业务规则

为了保证系统的稳定性，分类管理遵循以下规则：

1.  **深度限制**：分类最多支持 **3层** 嵌套。拖拽操作会自动验证深度，防止超过限制。
2.  **模板冲突保护**：包含模板的分类不能作为父分类。如果您尝试将一个分类移入含有模板的分类，操作将被禁止。这是为了确保模板始终位于“叶子分类”中。
3.  **系统分类保护**：某些内置分类（如“未分类”）受到保护，无法删除或移入其他分类。
4.  **唯一性**：在同一层级内，分类名称必须唯一。
5.  **视觉区分**：
    - 📄 **叶子分类**（文档图标）：没有子分类的分类，可以直接放置模板。
    - 📁 **非叶子分类**（文件夹图标）：包含子分类的分类，仅用于组织结构，不能直接放置模板。
    - 鼠标悬停在非叶子分类上会显示提示信息。

## 使用技巧

*   **快速重命名**：在浏览模式下，选中一个分类并按下 `F2` 键。
*   **批量清理**：使用复选框一次性选中多个不再需要的空分类进行删除。
*   **操作日志**：系统会自动记录所有的分类变更。如果您对结构进行了重大调整，可以在后台日志中查看历史记录。

---

> [!TIP]
> 排序模式下无法关闭对话框，请确保在调整完毕后点击“退出排序”以保存更改。
